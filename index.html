if(!rec || rec.status!=="ACTIVE"){
        out.classList.remove("hidden");
        out.innerHTML = <div class="title">عدم دسترسی</div><div class="muted">سریال فعال نیست.</div>;
        return;
      }
      if(user!==rec.username || pass!==rec.password){
        out.classList.remove("hidden");
        out.innerHTML = <div class="title">خطا در ورود</div><div class="muted">نام‌کاربری یا رمز اشتباه است.</div>;
        return;
      }

      const pkg = packages[rec.package];
      let support = "";
      if(rec.package===3 && rec.supportPhone){
        support = <div class="row" style="margin-top:8px"><span class="tag ok">تلفن پشتیبانی</span><span>${rec.supportPhone}</span></div>;
      }

      out.classList.remove("hidden");
      out.innerHTML = 
        <div class="title">اطلاعات گارانتی</div>
        <div class="row"><span class="tag ok">پکیج</span><span>${pkg.name}</span></div>
        <div class="row" style="margin-top:8px"><span class="tag warn">مدت گارانتی</span><span>${pkg.months} ماه</span></div>
        <div class="row" style="margin-top:8px"><span class="tag ok">تاریخ مشاهده</span><span>${nowDate()}</span></div>
        ${support}
      ;
    }

    // =========================
    // Router
    // =========================
    const app = document.getElementById("app");
    const r = route();
    if(r==="home") app.innerHTML = renderHome();
    if(r==="admin") app.innerHTML = renderAdmin();
    if(r==="panel") app.innerHTML = renderPanel();
    if(r==="qr") app.innerHTML = renderQR();

    // Handle SPA navigation
    document.querySelectorAll("a").forEach(a=>{
      if(a.getAttribute("href").startsWith("/")){
        a.addEventListener("click", e=>{
          e.preventDefault();
          history.pushState({}, "", a.getAttribute("href"));
          location.reload();
        });
      }
    });
  </script>
replace index.html
</body>
</html>
