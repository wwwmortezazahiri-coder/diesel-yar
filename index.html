
<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>پنل خدمات | بسته‌های برنزی، نقره‌ای، پریمیوم</title>
  <style>
    :root{
      --bg:#0b1220; --card:#121a2b; --accent:#4f8cff; --muted:#9bb0d1; --ok:#33d17a; --warn:#ffb020; --danger:#ff6b6b;
      --shadow:0 10px 30px rgba(0,0,0,.3);
    }
    *{box-sizing:border-box}
    body{margin:0; font-family:system-ui, -apple-system, Segoe UI, Roboto, sans-serif; background:var(--bg); color:#e7efff;}
    header{padding:20px 16px; text-align:center; background:linear-gradient(135deg,#0d1630,#0b1220);}
    h1{margin:0 0 6px; font-size:20px}
    p{margin:0; color:var(--muted)}
    .container{max-width:1100px; margin:0 auto; padding:16px}
    .tabs{display:flex; gap:8px; flex-wrap:wrap; margin:12px 0 18px}
    .tab-btn{background:#0f172a; border:1px solid #1c2741; color:#cfe0ff; padding:10px 14px; border-radius:10px; cursor:pointer}
    .tab-btn.active{background:var(--accent); color:white; border-color:transparent}
    .panel{display:none}
    .panel.active{display:block}
    .grid{display:grid; gap:16px}
    .grid-3{grid-template-columns:repeat(auto-fit, minmax(220px, 1fr))}
    .card{background:var(--card); padding:16px; border-radius:14px; box-shadow:var(--shadow); border:1px solid #1b2440}
    .badge{display:inline-block; padding:4px 10px; border-radius:999px; font-size:12px}
    .bronze{background:#6b4f2a}
    .silver{background:#4c5c6b}
    .premium{background:#6a4cff}
    .row{display:flex; gap:10px; flex-wrap:wrap}
    label{font-size:13px; color:#b9c9e6}
    input, select, textarea{
      width:100%; padding:10px; border-radius:10px; border:1px solid #273252; background:#0f172a; color:#e7efff;
    }
    input:disabled{opacity:.6}
    button{padding:10px 14px; border-radius:10px; border:none; cursor:pointer; background:var(--accent); color:white}
    button.secondary{background:#1e293b}
    .note{font-size:12px; color:var(--muted)}
    .ok{color:var(--ok)}
    .warn{color:var(--warn)}
    .danger{color:var(--danger)}
    .list{margin:0; padding:0; list-style:none}
    .list li{padding:10px; border-bottom:1px dashed #2a3658}
    .small{font-size:12px}
    .hidden{display:none}
  </style>
</head>
<body>
  <header>
    <h1>سیستم مدیریت بسته‌ها</h1>
    <p>برنزی | نقره‌ای | پریمیوم — دسترسی‌ها طبق منطق نهایی</p>
  </header>

  <div class="container">
    <div class="tabs" role="tablist">
      <button class="tab-btn active" data-tab="public">نمای عمومی</button>
      <button class="tab-btn" data-tab="seller">پنل فروشنده</button>
      <button class="tab-btn" data-tab="admin">پنل مدیریت</button>
    </div>

    <!-- Public Panel -->
    <section id="public" class="panel active">
      <div class="grid grid-3">
        <div class="card">
          <span class="badge bronze">برنزی</span>
          <h3>بسته برنزی</h3>
          <ul class="list small">
            <li>ثبت فقط توسط فروشنده</li>
            <li>بدون نام‌کاربری/رمز عبور</li>
            <li>دسترسی سطحی: گارانتی/FAQ</li>
          </ul>
        </div>
        <div class="card">
          <span class="badge silver">نقره‌ای</span>
          <h3>بسته نقره‌ای</h3>
          <ul class="list small">
            <li>ثبت فقط توسط فروشنده</li>
            <li>بدون نام‌کاربری/رمز عبور</li>
            <li>دسترسی سطحی: گارانتی/FAQ</li>
          </ul>
        </div>
        <div class="card">
          <span class="badge premium">پریمیوم</span>
          <h3>بسته پریمیوم</h3>
          <ul class="list small">
            <li class="ok">نام‌کاربری، رمز عبور و موبایل الزامی</li>
            <li>فعال‌سازی با اطلاعات مشتری</li>
            <li>دسترسی پیشرفته: ربات شخصی‌سازی و مانیتورینگ</li>
            <li class="warn">اطلاعات حساس در صفحه عمومی نمایش داده نمی‌شود</li>
          </ul>
        </div>
      </div>
    </section>

<!-- Seller Panel -->
    <section id="seller" class="panel">
      <div class="grid grid-3">
        <div class="card">
          <h3>ورود فروشنده</h3>
          <div class="row">
            <div style="flex:1">
              <label>کد فروشنده</label>
              <input id="sellerCode" placeholder="مثلاً S-1001" />
            </div>
            <div style="flex:1">
              <label>رمز فروشنده</label>
              <input id="sellerPass" type="password" placeholder="مثلاً 1234" />
            </div>
          </div>
          <div class="row" style="margin-top:10px">
            <button id="sellerLogin">ورود</button>
            <button id="sellerLogout" class="secondary">خروج</button>
          </div>
          <p class="note">پیش‌فرض تست: کد فروشنده S-1001 و رمز 1234</p>
          <p id="sellerStatus" class="note"></p>
        </div>

        <div class="card">
          <h3>ثبت مشتری جدید</h3>
          <label>نام مشتری</label>
          <input id="custName" placeholder="نام کامل" />

          <label>پکیج</label>
          <select id="pkg">
            <option value="bronze">برنزی</option>
            <option value="silver">نقره‌ای</option>
            <option value="premium">پریمیوم</option>
          </select>

          <label>نام‌کاربری (فقط پریمیوم)</label>
          <input id="custUser" placeholder="username" disabled />

          <label>رمز عبور (فقط پریمیوم)</label>
          <input id="custPass" type="password" placeholder="password" disabled />

          <label>شماره موبایل (فقط پریمیوم)</label>
          <input id="custMobile" placeholder="09xxxxxxxxx" disabled />

          <div class="row" style="margin-top:10px">
            <button id="saveCustomer">ذخیره</button>
            <button id="clearForm" class="secondary">پاکسازی</button>
          </div>
          <p id="formMsg" class="note"></p>
        </div>

        <div class="card">
          <h3>لیست مشتریان (فقط فروشنده)</h3>
          <ul id="sellerList" class="list"></ul>
        </div>
      </div>
    </section>

    <!-- Admin Panel -->
    <section id="admin" class="panel">
      <div class="grid grid-3">
        <div class="card">
          <h3>ورود مدیریت</h3>
          <label>رمز مدیریت</label>
          <input id="adminPass" type="password" placeholder="مثلاً admin" />
          <div class="row" style="margin-top:10px">
            <button id="adminLogin">ورود</button>
            <button id="adminLogout" class="secondary">خروج</button>
          </div>
          <p class="note">پیش‌فرض تست: رمز مدیریت admin</p>
          <p id="adminStatus" class="note"></p>
        </div>

        <div class="card">
          <h3>مشاهده دیتای کامل</h3>
          <p class="note">فقط مدیریت به اطلاعات حساس دسترسی دارد.</p>
          <ul id="adminList" class="list"></ul>
        </div>

        <div class="card">
          <h3>ابزار تست</h3>
          <button id="seedTest">ساخت دیتای تست</button>
          <button id="wipeAll" class="secondary">حذف همه داده‌ها</button>
          <p class="note">دقت: حذف همه داده‌ها برگشت ندارد.</p>
        </div>
      </div>
    </section>
  </div>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const $ = (id) => document.getElementById(id);

      // Tabs
      const tabButtons = document.querySelectorAll(".tab-btn");
      const panels = document.querySelectorAll(".panel");
      tabButtons.forEach(btn => {
        btn.addEventListener("click", () => {
          tabButtons.forEach(b => b.classList.remove("active"));
          panels.forEach(p => p.classList.remove("active"));
          btn.classList.add("active");
          $(btn.dataset.tab).classList.add("active");
        });
      });

      // Auth state
      const SELLER_CODE = "S-1001";
      const SELLER_PASS = "1234";
      const ADMIN_PASS = "admin";

      const getData = () => JSON.parse(localStorage.getItem("customers") || "[]");
      const setData = (arr) => localStorage.setItem("customers", JSON.stringify(arr));

const isSellerLoggedIn = () => localStorage.getItem("sellerLoggedIn") === "1";
      const isAdminLoggedIn = () => localStorage.getItem("adminLoggedIn") === "1";

      // Seller login
      $("sellerLogin").addEventListener("click", () => {
        const code = $("sellerCode").value.trim();
        const pass = $("sellerPass").value.trim();
        if (code === SELLER_CODE && pass === SELLER_PASS) {
          localStorage.setItem("sellerLoggedIn", "1");
          $("sellerStatus").textContent = "ورود موفق بود.";
          $("sellerStatus").className = "note ok";
          renderSellerList();
        } else {
          $("sellerStatus").textContent = "کد یا رمز اشتباه است.";
          $("sellerStatus").className = "note danger";
        }
      });

      $("sellerLogout").addEventListener("click", () => {
        localStorage.removeItem("sellerLoggedIn");
        $("sellerStatus").textContent = "خارج شدی.";
        $("sellerStatus").className = "note warn";
        renderSellerList();
      });

      // Admin login
      $("adminLogin").addEventListener("click", () => {
        const pass = $("adminPass").value.trim();
        if (pass === ADMIN_PASS) {
          localStorage.setItem("adminLoggedIn", "1");
          $("adminStatus").textContent = "ورود موفق بود.";
          $("adminStatus").className = "note ok";
          renderAdminList();
        } else {
          $("adminStatus").textContent = "رمز اشتباه است.";
          $("adminStatus").className = "note danger";
        }
      });

      $("adminLogout").addEventListener("click", () => {
        localStorage.removeItem("adminLoggedIn");
        $("adminStatus").textContent = "خارج شدی.";
        $("adminStatus").className = "note warn";
        renderAdminList();
      });

      // Package logic
      const pkg = $("pkg");
      const user = $("custUser");
      const pass = $("custPass");
      const mobile = $("custMobile");

      const togglePremiumFields = () => {
        const isPremium = pkg.value === "premium";
        user.disabled = !isPremium;
        pass.disabled = !isPremium;
        mobile.disabled = !isPremium;
      };

      pkg.addEventListener("change", togglePremiumFields);
      togglePremiumFields();

      // Save customer
      $("saveCustomer").addEventListener("click", () => {
        const msg = $("formMsg");
        msg.textContent = "";
        msg.className = "note";

        if (!isSellerLoggedIn()) {
          msg.textContent = "برای ثبت، ابتدا وارد پنل فروشنده شوید.";
          msg.className = "note danger";
          return;
        }

        const name = $("custName").value.trim();
        if (!name) {
          msg.textContent = "نام مشتری الزامی است.";
          msg.className = "note danger";
          return;
        }

        const packageType = pkg.value;
        const data = getData();

        if (packageType === "premium") {
          const u = user.value.trim();
          const p = pass.value.trim();
          const m = mobile.value.trim();
          if (!u || !p || !m) {
            msg.textContent = "برای پریمیوم، نام‌کاربری/رمز/موبایل الزامی است.";
            msg.className = "note danger";
            return;
          }
          data.push({
            id: "C-" + Date.now(),
            name,
            package: packageType,
            username: u,
            password: p,
            mobile: m,
            createdAt: new Date().toISOString()
          });
        } else {
          data.push({
            id: "C-" + Date.now(),
            name,
            package: packageType,
            createdAt: new Date().toISOString()
          });
        }

        setData(data);
        msg.textContent = "ذخیره شد.";
        msg.className = "note ok";
        renderSellerList();
        renderAdminList();
      });

      // Clear form
      $("clearForm").addEventListener("click", () => {
        $("custName").value = "";
        $("custUser").value = "";
        $("custPass").value = "";
        $("custMobile").value = "";
        $("formMsg").textContent = "";
      });

// Render lists
      const renderSellerList = () => {
        const list = $("sellerList");
        list.innerHTML = "";
        if (!isSellerLoggedIn()) {
          list.innerHTML = "<li>برای مشاهده لیست وارد شوید.</li>";
          return;
        }
        const data = getData();
        if (!data.length) {
          list.innerHTML = "<li>هیچ مشتری ثبت نشده است.</li>";
          return;
        }
        data.forEach(item => {
          const li = document.createElement("li");
          list.appendChild(li);
        });
      

      const renderAdminList = () => {
        const list = $("adminList");
        list.innerHTML = "";
        if (!isAdminLoggedIn()) {
          list.innerHTML = "<li>برای مشاهده، وارد مدیریت شوید.</li>";
          return;
        }
        const data = getData();
        if (!data.length) {
          list.innerHTML = "<li>هیچ مشتری ثبت نشده است.</li>";
          return;
        }
        data.forEach(item => {
          const li = document.createElement("li")
          if (item.package === "premium") {
          } else {
            li.textContent = base;
          }
          list.appendChild(li);
        });
      };

      // Seed test
      $("seedTest").addEventListener("click", () => {
        const demo = [
          { id:"C-1", name:"رضا احمدی", package:"bronze", createdAt:new Date().toISOString() },
          { id:"C-2", name:"الهام رضایی", package:"silver", createdAt:new Date().toISOString() },
          { id:"C-3", name:"مهدی کرمی", package:"premium", username:"mehdi", password:"12345", mobile:"09120000000", createdAt:new Date().toISOString() }
        ];
        setData(demo);
        renderSellerList();
        renderAdminList();
      });

      // Wipe
      $("wipeAll").addEventListener("click", () =>
        localStorage.removeItem("customers");
        renderSellerList();
        renderAdminList();
      });

      // Initial render
      renderSellerList();
      renderAdminList();
    });
  </script>
</body>
</html>





